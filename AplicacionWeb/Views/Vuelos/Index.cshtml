@using Dominio
@model List<Vuelo>

@{
	ViewBag.Title = "Panel de Vuelos";
}

<div class="py-5">
	<h2 class="text-center text-primary fs-1">Panel de Vuelos</h2>
</div>

@if (ViewBag.Mensaje != null)
{
	<div class="alert alert-danger text-center mb-5">@ViewBag.Mensaje</div>
}

<!-- Botón flotante -->
<button id="toggleFormBtn" class="floating-button" aria-label="Abrir buscador de vuelos" type="button">
    <span class="material-symbols-outlined">search</span>
</button>

<!-- Buscar Vuelos -->
<div id="searchFormContainer" class="search-form-container hidden">
	<div class="card p-4 mx-auto buscador-card">
        <h4 class="mb-3 text-primary text-center">Buscar Vuelos</h4>
		<form method="get" action="~/Vuelos/Buscar" class="aeropuerto-search-vertical">
            <div class="input-icon">
                <span class="material-symbols-outlined icon">search</span>
                <input type="text" name="codSalida" class="aeropuerto-search-input"
                       placeholder="Código IATA del aeropuerto de salida (ej. EZE)" maxlength="3" />
            </div>
            <div class="input-icon">
                <span class="material-symbols-outlined icon">search</span>
                <input type="text" name="codLlegada" class="aeropuerto-search-input"
                       placeholder="Código IATA del aeropuerto de llegada (ej. AEP)" maxlength="3" />
            </div>
            <button type="submit" class="aeropuerto-search-button">
                <i class="bi bi-search"></i>
            </button>
        </form>
    </div>
</div>

<div class="table-container ms-5 me-5 mb-5">
	<table class="table">
		<thead>
			<tr>
				<th>Frecuencia</th>
				<th>Origen</th>
				<th>Destino</th>
				<th>Avión</th>
				<th>Vuelo</th>
				<th>Precio</th>
				<th>Comprar</th>
			</tr>
		</thead>
		<tbody>
			@foreach (Vuelo vuelo in Model)
			{
				<tr>
					<td>@String.Join(", ", vuelo.Frecuencia)</td>
					<td>@vuelo.Ruta.Salida.Ciudad</td>
					<td>@vuelo.Ruta.Llegada.Ciudad</td>
					<td>@vuelo.Avion.Modelo</td>
					<td>@vuelo.Numero</td>
					<td>$ @vuelo.ObtenerCostoPorAsiento().ToString("F2")</td>
					<td>
						<a asp-controller="Vuelos" asp-action="Comprar" asp-route-id="@vuelo.Numero"
						   class="icono-comprar">
							<span class="material-symbols-outlined">
								shopping_cart_checkout
							</span>
						</a>
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>
